(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{419:function(t,e,a){"use strict";a.r(e);var s=a(17),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"cmake中定义编译宏"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cmake中定义编译宏"}},[t._v("#")]),t._v(" CMake中定义编译宏")]),t._v(" "),e("h2",{attrs:{id:"add-definitions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-definitions"}},[t._v("#")]),t._v(" add_definitions")]),t._v(" "),e("p",[e("code",[t._v("add_definitions")]),t._v("作为"),e("code",[t._v("CMAKE")]),t._v("中添加编译预处理宏的方法存在了很长时间")]),t._v(" "),e("p",[t._v("使用语法：")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加宏定义")]),t._v("\nadd_definitions"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("-DENABLE_DEBUG"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("通过这种方法定义的预处理宏会被当前工程中所有源码使用，这无意间放大了"),e("code",[t._v("definition")]),t._v("工作的范围。")]),t._v(" "),e("h2",{attrs:{id:"target-compile-definitions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#target-compile-definitions"}},[t._v("#")]),t._v(" target_compile_definitions")]),t._v(" "),e("p",[t._v("现在更多的使用方式是"),e("code",[t._v("target_compile_definitions")]),t._v(",其能够限制"),e("code",[t._v("definitions")]),t._v("的定义范围只在当前目标所用源码范围内，并通过"),e("code",[t._v("PRIVATE")]),t._v("参数，限定了链接该目标时是否可见此编译预处理宏定义。")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("target_compile_definitions"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("my_target PRIVATE "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("FOO")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BAR")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("关于"),e("code",[t._v("PRIVATE/INTERFACE/PUBLIC")]),t._v("修饰的作用可以参考"),e("a",{attrs:{href:"https://stackoverflow.com/questions/76930770/in-cmake-projec-a-target-need-to-include-project-b-with-interface-but-b-includ",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("ul",[e("li",[e("a",{attrs:{href:"https://stackoverflow.com/questions/9017573/define-preprocessor-macro-through-cmake",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.https://stackoverflow.com/questions/9017573/define-preprocessor-macro-through-cmake"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://stackoverflow.com/questions/76930770/in-cmake-projec-a-target-need-to-include-project-b-with-interface-but-b-includ",target:"_blank",rel:"noopener noreferrer"}},[t._v("2.https://stackoverflow.com/questions/76930770/in-cmake-projec-a-target-need-to-include-project-b-with-interface-but-b-includ"),e("OutboundLink")],1)])])])])}),[],!1,null,null,null);e.default=n.exports}}]);