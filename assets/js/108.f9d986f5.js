(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{422:function(s,t,a){"use strict";a.r(t);var n=a(17),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"cmake-parse-arguments"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cmake-parse-arguments"}},[s._v("#")]),s._v(" cmake_parse_arguments")]),s._v(" "),t("h2",{attrs:{id:"作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[s._v("#")]),s._v(" 作用")]),s._v(" "),t("p",[s._v("解析"),t("code",[s._v("cmake")]),s._v("中传入给"),t("code",[s._v("macro/function")]),s._v("的参数")]),s._v(" "),t("p",[s._v("命令的使用格式：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("cmake_parse_arguments"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("one_value_keywords"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("multi_value_keywords"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("args"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("ul",[t("li",[t("code",[s._v("<prefix>")]),s._v("表示给变量添加的前缀")]),s._v(" "),t("li",[t("code",[s._v("<options>")]),s._v("是变量的类型，可选参数")]),s._v(" "),t("li",[t("code",[s._v("<one_value_keywords>")]),s._v("是变量类型，单值变量")]),s._v(" "),t("li",[t("code",[s._v("<multi_value_keywords>")]),s._v("是变量类型，多值变量")]),s._v(" "),t("li",[t("code",[s._v("<args>...")]),s._v("可变参数，没有被前面几种变量类型捕获的变量都会放在这里")])]),s._v(" "),t("h2",{attrs:{id:"示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test_cmake_parse NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    set"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options SLOW FAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    set"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oneValueArgs DESTINATION DIRECTORY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    set"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("multiValueArgs TARGETS VARS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    cmake_parse_arguments"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("_TEST "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EXCLUDE"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ARGN}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    cmake_parse_arguments"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("_TYPE "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"STATIC;SHARED;MODULE"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ARGN}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    cmake_parse_arguments"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("_STD "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${options}")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${oneValueArgs}")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${multiValueArgs}")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ARGN}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TESTING___ '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${_TEST_EXCLUDE}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_TYPE '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${_TYPE_SHARED}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_STD_SLOW '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${_STD_SLOW}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_STD_FAST '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${_STD_FAST}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_STD_DESTINATION '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${_STD_DESTINATION}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_STD_DIRECTORY '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${_STD_DIRECTORY}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_STD_TARGETS '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${_STD_TARGETS}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_STD_VARS '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${_STD_VARS}")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nendfunction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntest_cmake_parse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PROJ EXCLUDE SHARED SLOW FAST DESTINATION tmp DIRECTORY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/user"')]),s._v(" TARGETS "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" bar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- TESTING___ TRUE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- _TYPE TRUE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- _STD_SLOW TRUE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- _STD_FAST TRUE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- _STD_DESTINATION tmp")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- _STD_DIRECTORY /home/user")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- _STD_TARGETS for;bar")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- _STD_VARS ")]),s._v("\n")])])]),t("p",[s._v("如上，定义了"),t("code",[s._v("cmake")]),s._v("函数，从上面的定义可以看出，通过"),t("code",[s._v("cmake_parse_arguments")]),s._v("的作用就是负责定义函数或宏的参数，并根据定义解析传入的参数，同时给变量添加函数内的命名前缀。")]),s._v(" "),t("p",[s._v("能够解析的参数有三种类型，可选项，类似"),t("code",[s._v("bool")]),s._v("类型，单值类型变量和多值类型，没有解析到的参数都将放入其后所跟的最优一个参数上。")]),s._v(" "),t("p",[t("code",[s._v("cmake_parse_arguments")]),s._v("还能自动给变量添加前缀名，如上面定义的"),t("code",[s._v("_TYPE_SHARED")]),s._v("和"),t("code",[s._v("_STD_FAST")]),s._v("等。")]),s._v(" "),t("blockquote",[t("ul",[t("li",[t("a",{attrs:{href:"https://cmake.org/cmake/help/latest/command/cmake_parse_arguments.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("1.https://cmake.org/cmake/help/latest/command/cmake_parse_arguments.html"),t("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=e.exports}}]);