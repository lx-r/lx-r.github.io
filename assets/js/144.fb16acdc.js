(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{461:function(t,s,a){"use strict";a.r(s);var e=a(17),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"strace-ltrace命令及其使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#strace-ltrace命令及其使用"}},[t._v("#")]),t._v(" strace/ltrace命令及其使用")]),t._v(" "),s("h2",{attrs:{id:"strace基本介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#strace基本介绍"}},[t._v("#")]),t._v(" "),s("code",[t._v("strace")]),t._v("基本介绍")]),t._v(" "),s("p",[s("code",[t._v("strace")]),t._v(" 是一个强大的工具，用于跟踪程序执行时的系统调用和接收到的信号。")]),t._v(" "),s("p",[t._v("通过 "),s("code",[t._v("strace")]),t._v("，可以了解程序在运行时请求了哪些系统调用，这些调用的参数是什么，以及操作系统对这些调用的响应。这对于调试程序、分析程序行为和优化性能非常有用。")]),t._v(" "),s("p",[t._v("其主要作用包括以下几点:")]),t._v(" "),s("ul",[s("li",[t._v("诊断程序错误：通过分析程序与操作系统之间的交互，可以帮助找到错误和异常的原因")]),t._v(" "),s("li",[t._v("性能分析：通过查看系统调用的时间、数量和类型，可以识别潜在的性能瓶颈")]),t._v(" "),s("li",[t._v("安全分析：检查程序是否进行恶意行为，如不当访问文件、套接字等")]),t._v(" "),s("li",[t._v("学习和理解：通过观察系统调用，可以加深对Linux操作系统、库函数和系统调用之间关系的理解")]),t._v(" "),s("li",[t._v("调试：在没有源代码的情况下，可以通过查看系统调用的顺序和参数来了解程序的执行流程")])]),t._v(" "),s("h2",{attrs:{id:"strace命令格式及常用选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#strace命令格式及常用选项"}},[t._v("#")]),t._v(" "),s("code",[t._v("strace")]),t._v("命令格式及常用选项")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("strace")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("选项"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 程序 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("程序参数"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("支持的常用选项有：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-c")]),t._v("统计每个系统调用的执行时间、次数和出错次数")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# % time     seconds  usecs/call     calls    errors syscall")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ------ ----------- ----------- --------- --------- ----------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  45.53    0.001222          26        47        42 openat")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  23.10    0.000620          28        22           mmap")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   6.78    0.000182          26         7           mprotect")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   5.96    0.000160         160         1           munmap")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   5.96    0.000160          16        10           pread64")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   4.06    0.000109          18         6           fstat")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   2.53    0.000068          17         4           read")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   2.24    0.000060          12         5           close")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   1.34    0.000036          36         1           clock_nanosleep")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   1.12    0.000030          30         1           write")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.97    0.000026           8         3           brk")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.41    0.000011           5         2         1 arch_prctl")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.00    0.000000           0        31        28 stat")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.00    0.000000           0         1         1 access")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.00    0.000000           0         1           execve")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ------ ----------- ----------- --------- --------- ----------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 100.00    0.002684                   142        72 total")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("-f")]),t._v("跟踪由 "),s("code",[t._v("fork")]),t._v(" 调用产生的子进程")]),t._v(" "),s("li",[s("code",[t._v("-o filename")]),t._v("将 "),s("code",[t._v("strace")]),t._v(" 的输出写入文件 "),s("code",[t._v("filename")])]),t._v(" "),s("li",[s("code",[t._v("-e expr")]),t._v("指定一个表达式来控制跟踪的系统调用，例如"),s("code",[t._v("-e trace=open")]),t._v("表示只跟踪 "),s("code",[t._v("open")]),t._v(" 调用")])]),t._v(" "),s("h2",{attrs:{id:"ltrace介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ltrace介绍"}},[t._v("#")]),t._v(" ltrace介绍")]),t._v(" "),s("p",[s("code",[t._v("ltrace")]),t._v(" 是一个用于跟踪程序库函数调用的工具。它会显示被执行的进程调用的动态库函数，以及接收到的信号。与 "),s("code",[t._v("strace")]),t._v(" 类似，"),s("code",[t._v("ltrace")]),t._v(" 可以帮助用来调试程序和分析其行为。它还可以拦截并打印程序执行的系统调用。")]),t._v(" "),s("h2",{attrs:{id:"ltrace命令格式及其常用选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ltrace命令格式及其常用选项"}},[t._v("#")]),t._v(" "),s("code",[t._v("ltrace")]),t._v("命令格式及其常用选项")]),t._v(" "),s("p",[t._v("命令格式：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("ltrace "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("选项"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 程序 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("程序参数"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("常用选项：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-c")]),t._v("：统计每个库函数的调用次数和时间，并在程序退出时打印摘要")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# % time     seconds  usecs/call     calls      function")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ------ ----------- ----------- --------- --------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  99.92    1.000427     1000427         1 nanosleep")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.02    0.000250         250         1 _ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.02    0.000250         250         1 _ZNSolsEPFRSoS_E")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.02    0.000168         168         1 _ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   0.01    0.000121         121         1 _ZNSolsEi")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ------ ----------- ----------- --------- --------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 100.00    1.001216                     5 total")]),t._v("\n\n")])])]),s("ul",[s("li",[s("code",[t._v("-D, --debug <掩码>")]),t._v("：打印调试信息。")]),t._v(" "),s("li",[s("code",[t._v("-e <过滤条件>")]),t._v("指定要跟踪的事件，例如特定函数")]),t._v(" "),s("li",[s("code",[t._v("-f")]),t._v("：跟踪子进程")]),t._v(" "),s("li",[s("code",[t._v("-S")]),t._v("显示系统调用")]),t._v(" "),s("li",[s("code",[t._v("-t")]),t._v("打印绝对时间戳")]),t._v(" "),s("li",[s("code",[t._v("-o, --output=file")]),t._v(" 把输出定向到文件")])])])}),[],!1,null,null,null);s.default=n.exports}}]);