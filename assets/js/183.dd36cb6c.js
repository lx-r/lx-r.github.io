(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{497:function(s,a,t){"use strict";t.r(a);var e=t(17),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"bash-shell命令行参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bash-shell命令行参数"}},[s._v("#")]),s._v(" bash shell命令行参数")]),s._v(" "),a("p",[a("code",[s._v("bash shell")]),s._v("会将一些称为位置参数"),a("code",[s._v("positional parameter")]),s._v("的特殊变量分配给输入到命令行中的所有参数。位置参数变量是标准的数字，"),a("code",[s._v("$0")]),s._v(" 是程序名， "),a("code",[s._v("$1")]),s._v(" 是第"),a("br"),s._v("\n一个参数， "),a("code",[s._v("$2")]),s._v(" 是第二个参数，依次类推。")]),s._v(" "),a("h2",{attrs:{id:"常规使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常规使用"}},[s._v("#")]),s._v(" 常规使用")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#！/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("factorial")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v(" number "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" number "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" number"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("factorial")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$factorial")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$number")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" The factorial of "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" is "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$factorial")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./arg.sh 3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The factorial of 3 is 6")]),s._v("\n")])])]),a("p",[s._v("上面的例子是使用了一个命令行参数，在需要输入更多的命令行参数，则每个参数都必须用空格分开。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("total")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" The first parameter is "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" The second parameter is "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" The total value is "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$total")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./arg.sh 3 2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The first parameter is 3.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The second parameter is 2.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The total value is 6.")]),s._v("\n")])])]),a("p",[s._v("前面的两个例子，命令行参数使用的都是数字，此外，也可以在命令行上用文本字符串。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" Hello "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./arg.sh shell")]),s._v("\n")])])]),a("p",[a("strong",[s._v("这里，值得注意的是当参数中有引号或空格时需要使用双引号，否则命令会出错。")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# error")]),s._v("\n./arg.sh Shell"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s Friend\n\n# right\n./arg.sh \"Shell'")]),s._v('s Friend"\n')])])]),a("p",[s._v("将文本字符串作为参数传递时，引号并非数据的一部分。")]),s._v(" "),a("p",[s._v("如果脚本需要的命令行参数不止9个，仍然可以处理，但是需要稍微修改一下变量名。在第9个变量之后，必须在变量数字周围加上花括号，比如 "),a("code",[s._v("${10}")]),s._v(" 。")]),s._v(" "),a("h2",{attrs:{id:"获取脚本名字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取脚本名字"}},[s._v("#")]),s._v(" 获取脚本名字")]),s._v(" "),a("p",[s._v("前面介绍过，"),a("code",[s._v("$0")]),s._v("命令行参数可以取到脚本名字，但是在一些特殊的情况下，这会得到意想不到的结果。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" shell name: "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v("\n")])])]),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" arg.sh\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# shell name: arg.sh")]),s._v("\n")])])]),a("p",[s._v("直接通过上面的命令，执行"),a("code",[s._v("$0")]),s._v("所得结果是"),a("code",[s._v("arg.sh")]),s._v("。再看下面，")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("./arg.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# shell name: ./arg.sh")]),s._v("\n\n/home/rob/arg.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /home/rob/arg.sh")]),s._v("\n\n")])])]),a("p",[s._v("可以看到当使用脚本文件路径直接运行时，"),a("code",[s._v("$0")]),s._v("命令取的是完整的路径，而非脚本名。要实现这个功能要借助"),a("code",[s._v("shell")]),s._v("中的另一个命令"),a("code",[s._v("basename")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" shell name: "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("basename")]),s._v(" $0"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# shell name: arg.sh")]),s._v("\n")])])]),a("p",[s._v("如此，上面的几种方式执行后的结果都是"),a("code",[s._v("arg.sh")]),s._v("。"),a("code",[s._v("basename")]),s._v("就是取文件名，像"),a("code",[s._v("python")]),s._v("中的"),a("code",[s._v("os.path.basename")]),s._v("同样也是从路径中提取文件名。")]),s._v(" "),a("p",[s._v("上面的例子中都是直接默认命令运行时该传递的参数都传递了，但实际往往并非如此，因此需要检验传入的参数，")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" Hello "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" arg3 is empty.\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n")])])]),a("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-8685746128991385","data-ad-slot":"2974191661"}})],1)}),[],!1,null,null,null);a.default=n.exports}}]);