(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{511:function(s,a,t){"use strict";t.r(a);var e=t(17),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"初识shell脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初识shell脚本"}},[s._v("#")]),s._v(" 初识"),a("code",[s._v("shell")]),s._v("脚本")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("who")]),s._v("\n")])])]),a("p",[s._v("shell不会解释以 "),a("code",[s._v("#")]),s._v(" 开头的行,但以"),a("code",[s._v("#!")]),s._v(" 开头的第一行"),a("code",[s._v("#")]),s._v("后面的惊叹号会告诉"),a("code",[s._v("shell")]),s._v("用哪个"),a("code",[s._v("shell")]),s._v("来运行脚本。")]),s._v(" "),a("p",[s._v("可以将 echo 语句添加到shell脚本中任何需要显示额外信息的地方。")]),s._v(" "),a("p",[s._v("shell脚本会自动决定变量值的数据类型。与系统变量类似，用户变量可通过美元符引用。")]),s._v(" "),a("p",[s._v("有两种方法可以将命令输出赋给变量：")]),s._v(" "),a("ul",[a("li",[s._v("反引号字符（ ` ）")]),s._v(" "),a("li",[s._v("$() 格式")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("curDate")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("curDate")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("who")]),s._v("\n")])])]),a("p",[a("code",[s._v(">")]),s._v("会重定向，"),a("code",[s._v(">>")]),s._v("会追加到原来文件上。")]),s._v(" "),a("p",[s._v("管道，"),a("code",[s._v("|")]),s._v("将一个命令的输出作为另外一个命令的输入。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("rob@xx-rob:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" te\ntest.sh\n")])])]),a("h2",{attrs:{id:"数学运算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数学运算"}},[s._v("#")]),s._v(" 数学运算")]),s._v(" "),a("p",[a("code",[s._v("expr")]),s._v("命令允许在命令行"),a("br"),s._v("\n上处理数学表达式。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("+10\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 11")]),s._v("\n")])])]),a("p",[s._v("bash shell为了保持跟Bourne shell的兼容而包含了 expr 命令，但它同样也提供了一种更简单的方法来执行数学表达式。")]),s._v(" "),a("p",[s._v("在将一个数学运算结果赋给某个变量时，可以用美元符和"),a("br"),s._v("\n方括号"),a("code",[s._v("（ $[ operation ] ）")]),s._v("将数学表达式围起来")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("var1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" + "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$var1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6")]),s._v("\n")])])]),a("p",[a("code",[s._v("bash shell")]),s._v("数学运算符只支持整数运算。如要使用浮点数运算，一种解决方案是使用内建的"),a("code",[s._v("bash")]),s._v("计算器"),a("code",[s._v("bc")]),s._v("。")]),s._v(" "),a("p",[s._v("终端中使用方法：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("rob@xx-rob:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.07")]),s._v(".1\nCopyright "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1991")]),s._v("-1994, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1997")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1998")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2004")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2006")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2008")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v("-2017 Free Software Foundation, Inc.\nThis is "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" software with ABSOLUTELY NO WARRANTY.\nFor details "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" `warranty'. \n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("b")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("./2.\nb\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nscale\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scale")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("b")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("./2.\nb\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v("\n")])])]),a("p",[a("code",[s._v("scale")]),s._v("控制小数的位数，未设置时是"),a("code",[s._v("0")]),s._v("位，设置了之后才能展示期望的位数。终端退出"),a("code",[s._v("bc")]),s._v("使用"),a("code",[s._v("quit")]),s._v("。")]),s._v(" "),a("p",[s._v("在脚本中可以用命令替换运行"),a("code",[s._v("bc")]),s._v("命令。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("var1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scale=4; 3.44 / 5"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bc")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" The answer is "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$var1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rob@xx-rob:~$ ./test1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The answer is .6880")]),s._v("\n")])])]),a("h2",{attrs:{id:"shell命令的退出状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell命令的退出状态码"}},[s._v("#")]),s._v(" shell命令的退出状态码")]),s._v(" "),a("p",[s._v("Linux提供了一个专门的变量"),a("code",[s._v("$?")]),s._v("来保存上个已执行命令的退出状态码。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n")])])]),a("p",[s._v("无效命令会返回一个退出状态码 "),a("code",[s._v("127")]),s._v(" 。")]),s._v(" "),a("p",[s._v("exit 命令允许你在脚本结束时指定一个退出状态码。退出状态码最大只能是 255 。超出将取"),a("code",[s._v("256")]),s._v("的余数。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("who")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("curDate")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("curDate")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"curDate: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDate}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n")])])]),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("./test.sh\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 100")]),s._v("\n")])])]),a("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-8685746128991385","data-ad-slot":"2974191661"}})],1)}),[],!1,null,null,null);a.default=n.exports}}]);