(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{558:function(t,a,e){"use strict";e.r(a);var n=e(17),s=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"cudatoolkit介绍及配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cudatoolkit介绍及配置"}},[t._v("#")]),t._v(" cudatoolkit介绍及配置")]),t._v(" "),a("h2",{attrs:{id:"_1-gpu与cuda、cudatoolkit、cudnn之间的关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-gpu与cuda、cudatoolkit、cudnn之间的关系"}},[t._v("#")]),t._v(" 1.GPU与CUDA、cudatoolkit、cuDNN之间的关系")]),t._v(" "),a("h3",{attrs:{id:"_1-1-gpu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-gpu"}},[t._v("#")]),t._v(" 1.1 GPU")]),t._v(" "),a("p",[a("strong",[t._v("GPU")]),t._v("是图形处理器(Graphics Processing Unit)的缩写，是一种专门在计算机上执行绘图运算工作的微处理器。图形处理器使显卡减少对中央处理器（CPU）的依赖，GPU为大规模的并行运算而优化，因此有着比为串行指令而优化的CPU快的多的运算速度"),a("a",{attrs:{href:"https://www.zhihu.com/question/19717029",target:"_blank",rel:"noopener noreferrer"}},[t._v("1"),a("OutboundLink")],1),t._v("。常用的GPU品牌厂商有NVIDIA,INTEL,AMD等。")]),t._v(" "),a("p",[t._v("确定显卡型号后，可在Nvidia官网上下载对应的GPU驱动,"),a("a",{attrs:{href:"https://www.nvidia.com/Download/index.aspx?lang=en-us",target:"_blank",rel:"noopener noreferrer"}},[t._v("驱动下载地址"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"_1-2-cuda"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-cuda"}},[t._v("#")]),t._v(" 1.2 CUDA")]),t._v(" "),a("p",[a("strong",[t._v("CUDA")]),t._v("英文全称是"),a("code",[t._v("Compute Unified Device Architecture")]),t._v("，是显卡厂商NVIDIA推出的运算平台。 CUDA™是一种由NVIDIA推出的通用并行计算架构，该架构使GPU能够解决复杂的计算问题。按照官方的说法是，"),a("strong",[t._v("CUDA是一个并行计算平台和编程模型，能够使得使用GPU进行通用计算变得简单和优雅")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"_1-3-cuda-toolkit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-cuda-toolkit"}},[t._v("#")]),t._v(" 1.3 CUDA Toolkit")]),t._v(" "),a("p",[a("strong",[t._v("CUDA toolkit")]),t._v("即是实现CUDA并行计算平台和编程模型的工具箱，包含了一系列套件。包括GPU加速库，程序调试和优化工具,在主流"),a("code",[t._v("x86\\ARM\\POWER")]),t._v("平台上构建和部署应用的运行时库。"),a("code",[t._v("cudatoolkit")]),t._v("可以从"),a("code",[t._v("NVIDIA")]),t._v("官网下载，也可在通过虚拟环境管理工具"),a("code",[t._v("conda\\pip")]),t._v("下载。通过"),a("code",[t._v("NVIDIA")]),t._v("官网下载的"),a("code",[t._v("CUDA toolkit")]),t._v("中包含有如"),a("code",[t._v("GDB,NVCC")]),t._v("及显卡驱动等工具。通过"),a("code",[t._v("pip")]),t._v("安装的"),a("code",[t._v("cudatoolkit")]),t._v("通常仅包括必要的库文件，"),a("strong",[t._v("完整的"),a("code",[t._v("CUDA Toolkit")]),t._v("中包含的模块及CUDA Toolkit与显卡驱动的版本对应关系可见")]),a("a",{attrs:{href:"https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#major-components",target:"_blank",rel:"noopener noreferrer"}},[t._v("2"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/cuda1cudatoolkit.jpg",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("https://zhuanlan.zhihu.com/p/91334380")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("nvcc")]),t._v("命令是"),a("code",[t._v("NVIDIA CUDA Compiler")]),t._v("，就是"),a("code",[t._v("CUDA")]),t._v("的编译器,可以从"),a("code",[t._v("CUDA Toolkit")]),t._v("的"),a("code",[t._v("/bin")]),t._v("目录中获取,类似于"),a("code",[t._v("gcc")]),t._v("就是"),a("code",[t._v("c")]),t._v("语言的编译器")]),t._v(" "),a("li",[a("code",[t._v("nvidia-smi")]),t._v("是"),a("code",[t._v("NVIDIA System Management Interface")]),t._v("是"),a("code",[t._v("NVIDIA Management Library(NVML)")]),t._v("构建的命令行实用工具，包含在显卡驱动（"),a("code",[t._v("NVIDIA display driver")]),t._v("）中，")]),t._v(" "),a("li",[a("code",[t._v("nvcc")]),t._v("与"),a("code",[t._v("nvidia-smi")]),t._v("输出的"),a("code",[t._v("CUDA")]),t._v("版本不一致，"),a("code",[t._v("CUDA")]),t._v("有两个主要的"),a("code",[t._v("API：runtime(运行时) API")]),t._v("和"),a("code",[t._v("driver API")]),t._v("。这两个API都有对应的CUDA版本（如9.2和10.0等）。用于支持driver API的必要文件(如libcuda.so)是由GPU driver installer安装的。nvidia-smi就属于这一类API。用于支持runtime API的必要文件(如libcudart.so以及nvcc)是由CUDA Toolkit installer安装的。nvcc是与CUDA Toolkit一起安装的CUDA compiler-driver tool，它只知道它自身构建时的CUDA runtime版本。它不知道安装了什么版本的GPU driver，甚至不知道是否安装了GPU driver。综上，如果driver API和runtime API的CUDA版本不一致可能是因为你使用的是单独的GPU driver installer，而不是CUDA Toolkit installer里的GPU driver installer。")]),t._v(" "),a("li",[a("code",[t._v("runtime")]),t._v("与"),a("code",[t._v("driver API")]),t._v("的区别，"),a("code",[t._v("runtime")]),t._v("是更高级的封装，开发人员用起来更方便，而"),a("code",[t._v("driver API")]),t._v("更接近底层，速度可能会更快")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/cuda1runtime.jpg",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_1-4-cudnn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-cudnn"}},[t._v("#")]),t._v(" 1.4 cuDNN")]),t._v(" "),a("blockquote",[a("p",[t._v("https://blog.csdn.net/qq_42406643/article/details/109545766")])]),t._v(" "),a("p",[a("code",[t._v("cuDNN")]),t._v("的全称为"),a("code",[t._v("NVIDIA CUDA® Deep Neural Network library")]),t._v("，是"),a("code",[t._v("NVIDIA")]),t._v("专门针对深度神经网络中的基础操作而设计基于GPU的加速库。cuDNN为深度神经网络中的标准流程提供了高度优化的实现方式，例如convolution、pooling、normalization以及activation layers的前向以及后向过程。"),a("br"),t._v("\nCUDA这个平台一开始并没有安装cuDNN库，当开发者们需要用到深度学习GPU加速时才安装cuDNN库，工作速度相较CPU快很多。")]),t._v(" "),a("p",[t._v("查看cuDNN版本：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /usr/local/cuda/include/cudnn.h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" CUDNN_MAJOR "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-A")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2-linux下安装gpu-driver-cuda-toolkit-cudnn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-linux下安装gpu-driver-cuda-toolkit-cudnn"}},[t._v("#")]),t._v(" 2.Linux下安装GPU Driver/CUDA Toolkit/cuDNN")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://phoenixnap.com/kb/install-nvidia-drivers-ubuntu",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装显卡驱动"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" add-apt-repository ppa:graphics-drivers/ppa ubuntu-drivers devices\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nvidia-driver-*\n")])])]),a("p",[t._v("或者使用"),a("code",[t._v("ubuntu")]),t._v("发行版推荐的驱动")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sudo sh NVIDIA-Linux-x86_64-440.44.run -no-x-check -no-nouveau-check -no-opengl- files")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" ubuntu-drivers autoinstall\n")])])])]),t._v(" "),a("li",[a("p",[t._v("安装cudatoolkit，在"),a("a",{attrs:{href:"https://developer.nvidia.com/cuda-toolkit-archive",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1),t._v("下载对应的cudatoolkit，与驱动版本需对应，版本对应关系"),a("a",{attrs:{href:"https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#major-components",target:"_blank",rel:"noopener noreferrer"}},[t._v("见"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LD_LIBRARY_PATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LD_LIBRARY_PATH")]),t._v(":/usr/local/cuda/lib64\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v(":/usr/local/cuda/bin\n")])])]),a("p",[t._v("安装成功后，输出为：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/cuda1cudainstall.jpg",alt:""}})]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("nvcc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\nnvcc: NVIDIA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Cuda compiler driver\nCopyright "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2005")]),t._v("-2021 NVIDIA Corporation\nBuilt on Sun_Aug_15_21:14:11_PDT_2021\nCuda compilation tools, release "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11.4")]),t._v(", V11.4.120 \nBuild cuda_11.4.r11.4/compiler.30300941_0\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.2")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("安装cuDNN,"),a("a",{attrs:{href:"https://developer.nvidia.com/rdp/cudnn-download",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载文件"),a("OutboundLink")],1),t._v(",执行如下命令。")])])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-xzvf")]),t._v(" cudnn-x.x-linux-x64-v8.x.x.x.tgz \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" cuda/include/cudnn*.h /usr/local/cuda/include \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" cuda/lib64/libcudnn* /usr/local/cuda/lib64 \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" a+r /usr/local/cuda/include/cudnn*.h /usr/local/cuda/lib64/libcudnn*\n")])])]),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("blockquote",[a("ul",[a("li",[a("a",{attrs:{href:"https://www.zhihu.com/question/19717029",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.https://www.zhihu.com/question/19717029"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:""}}),a("a",{attrs:{href:"https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#major-components",target:"_blank",rel:"noopener noreferrer"}},[t._v("2.https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#major-components"),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=s.exports}}]);