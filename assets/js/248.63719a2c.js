(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{560:function(t,s,_){"use strict";_.r(s);var a=_(17),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"strip命令及使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#strip命令及使用"}},[t._v("#")]),t._v(" strip命令及使用")]),t._v(" "),s("h2",{attrs:{id:"作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),s("p",[t._v("在使用"),s("code",[t._v("gcc")]),t._v("编译程序时，我们记得有选项"),s("code",[t._v("-g")]),t._v("，意味者是否保存调试信息。如果保存了调试信息，那么程序体积就会变大。")]),t._v(" "),s("p",[t._v("strip命令就是将程序中不必要的信息如"),s("code",[t._v("debug")]),t._v("和"),s("code",[t._v("symbol")]),t._v("信息去除，使程序体积减小。")]),t._v(" "),s("h2",{attrs:{id:"使用方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[t._v("#")]),t._v(" 使用方法")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("strip "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),s("p",[t._v("选项：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("--remove-section=<name>")]),t._v(" 移除指定名称的节")]),t._v(" "),s("li",[s("code",[t._v("--strip-debug")]),t._v(" 移除调试信息")]),t._v(" "),s("li",[s("code",[t._v("--strip-all")]),t._v(" 移除所有不需要的信息")]),t._v(" "),s("li",[s("code",[t._v("--strip-program-headers")]),t._v(" 移除程序头信息")]),t._v(" "),s("li",[s("code",[t._v("--strip-section=<name>")]),t._v(" 移除指定名称的节")]),t._v(" "),s("li",[s("code",[t._v("--strip-symbol=<name>")]),t._v(" 移除指定名称的符号")]),t._v(" "),s("li",[s("code",[t._v("--strip-unneeded")]),t._v(" 移除未使用的符号")]),t._v(" "),s("li",[s("code",[t._v("-R")]),t._v(" 移除运行时搜索路径信息")]),t._v(" "),s("li",[s("code",[t._v("-g")]),t._v(" 保留调试信息")]),t._v(" "),s("li",[s("code",[t._v("-h")]),t._v(" 显示帮助信息")]),t._v(" "),s("li",[s("code",[t._v("-K")]),t._v(" 保留符号表和字符串表")]),t._v(" "),s("li",[s("code",[t._v("-M")]),t._v(" 保留运行时搜索路径信息")]),t._v(" "),s("li",[s("code",[t._v("-N")]),t._v(" 保留符号表和字符串表")]),t._v(" "),s("li",[s("code",[t._v("-R")]),t._v(" 移除运行时搜索路径信息")]),t._v(" "),s("li",[s("code",[t._v("-V")]),t._v(" 显示版本信息")])]),t._v(" "),s("h2",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("gcc app.cpp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" app\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-alh")]),t._v(" app\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -rwxrwxrwx 1 xx xx 34K 4月  11 21:58 app")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" app\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, with debug_info, not stripped")]),t._v("\n\nstrip app\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-alh")]),t._v(" app\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -rwxrwxrwx 1 xx xx 15K 4月  11 21:58 app")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" app\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, stripped")]),t._v("\n")])])]),s("p",[t._v("使用"),s("code",[t._v("nm")]),t._v("命令查看：")]),t._v(" "),s("p",[s("strong",[t._v("before strip:")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("\nnm app\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404068 B __bss_start")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404190 b completed.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404058 D __data_start")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404058 W data_start")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 00000000004010f0 t deregister_tm_clones")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 00000000004010e0 T _dl_relocate_static_pie")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401160 t __do_global_dtors_aux")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000403dd8 d __do_global_dtors_aux_fini_array_entry")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404060 D __dso_handle")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000403de0 d _DYNAMIC")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404068 D _edata")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404198 B _end")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401338 T _fini")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401190 t frame_dummy")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000403dd0 d __frame_dummy_init_array_entry")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 00000000004021cc r __FRAME_END__")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404000 d _GLOBAL_OFFSET_TABLE_")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  w __gmon_start__")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 000000000040200c r __GNU_EH_FRAME_HDR")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U __gxx_personality_v0@@CXXABI_1.3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401000 T _init")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000403dd8 d __init_array_end")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000403dd0 d __init_array_start")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000402000 R _IO_stdin_used")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401330 T __libc_csu_fini")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 00000000004012c0 T __libc_csu_init")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U __libc_start_main@@GLIBC_2.2.5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401196 T main")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401120 t register_tm_clones")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 00000000004010b0 T _start")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404068 D __TMC_END__")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U _Unwind_Resume@@GCC_3.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U _ZdaPv@@GLIBCXX_3.4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401250 W _ZlsRSoRK3Foo")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 00000000004011f8 W _ZN3FooC1Ev")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 00000000004011f8 W _ZN3FooC2Ev")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401226 W _ZN3FooD1Ev")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000401226 W _ZN3FooD2Ev")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U _Znam@@GLIBCXX_3.4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U _ZNSolsEi@@GLIBCXX_3.4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U _ZNSolsEPFRSoS_E@@GLIBCXX_3.4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000402006 r _ZNSt8__detail30__integer_to_chars_is_unsignedIjEE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000402007 r _ZNSt8__detail30__integer_to_chars_is_unsignedImEE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000402008 r _ZNSt8__detail30__integer_to_chars_is_unsignedIyEE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U _ZSt21ios_base_library_initv@@GLIBCXX_3.4.32")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0000000000404080 B _ZSt4cout@@GLIBCXX_3.4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U _ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_@@GLIBCXX_3.4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                  U _ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc@@GLIBCXX_3.4")]),t._v("\n")])])]),s("p",[s("strong",[t._v("after strip:")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("nm app\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nm: app: no symbols")]),t._v("\n")])])]),s("p",[s("code",[t._v("nm")]),t._v(" 命令是 "),s("code",[t._v("Linux")]),t._v(" 下的一个强大的文件分析工具，用于检查和分析二进制文件、库文件、可执行文件中的符号表。它返回二进制文件中各段的信息，特别是其中的符号表")]),t._v(" "),s("p",[s("code",[t._v("nm")]),t._v(" 用于检查编译过程中生成的"),s("code",[t._v(".o")]),t._v("目标文件、"),s("code",[t._v(".so")]),t._v("库文件和可执行文件文件，并显示其中的内容，特别是符号表，而符号表包含了程序中定义的函数、变量和其他符号的信息。")]),t._v(" "),s("p",[t._v("与"),s("code",[t._v("nm")]),t._v("功能相同的还有"),s("code",[t._v("objdump/ar")]),t._v("命令。")]),t._v(" "),s("h3",{attrs:{id:"reference"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[t._v("#")]),t._v(" reference")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/diegodu/p/6824895.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.https://www.cnblogs.com/diegodu/p/6824895.html"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);