(window.webpackJsonp=window.webpackJsonp||[]).push([[251],{565:function(e,a,s){"use strict";s.r(a);var r=s(17),t=Object(r.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"docker-registry管理docker镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-registry管理docker镜像"}},[e._v("#")]),e._v(" Docker Registry管理Docker镜像")]),e._v(" "),a("p",[e._v("前面介绍了如何构建"),a("code",[e._v("Docker")]),e._v("镜像，一个完整的系统可能包含上百个子模块，对应就有上百个镜像，加上不同的版本，镜像将会更多。如何管理这些镜像呢？这正是"),a("code",[e._v("Docker Registry")]),e._v("的作用。")]),e._v(" "),a("h2",{attrs:{id:"使用docker-hub"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用docker-hub"}},[e._v("#")]),e._v(" 使用Docker Hub")]),e._v(" "),a("p",[e._v("使用Docker Hub管理镜像，Docker Hub是Docker官方维护的Docker Registry，上面存放着很多优秀的镜像。不仅如此，Docker Hub还提供认证、工作组结构、工作流工具、构建触发器等工具来简化工作。")]),e._v(" "),a("p",[e._v("可使用docker search命令搜索存放在Docker Hub中的镜像。")]),e._v(" "),a("p",[e._v("Docker Hub如何使用呢?")]),e._v(" "),a("h3",{attrs:{id:"注册与登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册与登录"}},[e._v("#")]),e._v(" 注册与登录")]),e._v(" "),a("p",[e._v("Docker Hub的使用非常简单，只需注册一个Docker Hub账号，就可正常使用了。登录后，可看到Docker Hub的主页。")]),e._v(" "),a("p",[e._v("也可以使用"),a("code",[e._v("docker login")]),e._v("命令登陆"),a("code",[e._v("Docker Hub")]),e._v("。")]),e._v(" "),a("p",[e._v("如：")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" login\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Username:xxx")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Password:xxx")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Login Succeeded")]),e._v("\n")])])]),a("h3",{attrs:{id:"新建仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建仓库"}},[e._v("#")]),e._v(" 新建仓库")]),e._v(" "),a("p",[e._v("单击"),a("code",[e._v("Docker Hub")]),e._v("主页上的"),a("code",[e._v("Create Repository")]),e._v("按钮，按照提示填入信息即可创建一个仓库。只需填入相关信息，并单击"),a("code",[e._v("Create")]),e._v("按钮，就可创建一个名为"),a("code",[e._v("ai_machine")]),e._v("的公共仓库。")]),e._v(" "),a("h3",{attrs:{id:"推送仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推送仓库"}},[e._v("#")]),e._v(" 推送仓库")]),e._v(" "),a("p",[e._v("使用以下命令可将前文构建的镜像推送到"),a("code",[e._v("Docker Hub")]),e._v("。例如：")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" push image_name\n")])])]),a("p",[e._v("经过一段时间的等待，就可推送成功。然后，就可以在"),a("code",[e._v("Docker Hub")]),e._v("查看已推送的镜像。")]),e._v(" "),a("h2",{attrs:{id:"搭建私有registry管理镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建私有registry管理镜像"}},[e._v("#")]),e._v(" 搭建私有registry管理镜像")]),e._v(" "),a("p",[e._v("在很多场景下，需使用私有仓库管理"),a("code",[e._v("Docker")]),e._v("镜像。相比"),a("code",[e._v("Docker Hub")]),e._v("，私有仓库中已有的镜像，无须从"),a("code",[e._v("Docker Hub")]),e._v("下载，只需从私有仓库中下载即可，可以节省带宽。私有仓库也更加安全，更便于内部镜像的统一管理。")]),e._v(" "),a("p",[e._v("如何搭建、使用私有仓库呢？可使用"),a("code",[e._v("Docker Registry 2.0")]),e._v("来搭建私有仓库，如下，先用"),a("code",[e._v("Docker Registry 2.0")]),e._v("搭建一个私有仓库，然后将Docker镜像推送到私有仓库。")]),e._v(" "),a("h3",{attrs:{id:"搭建私有仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建私有仓库"}},[e._v("#")]),e._v(" 搭建私有仓库")]),e._v(" "),a("p",[a("code",[e._v("Docker Registry 2.0")]),e._v("的搭建非常简单，只需执行以下命令即可新建并启动一个"),a("code",[e._v("DockerRegistry 2.0")]),e._v("。")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("5000")]),e._v(":5008 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("always "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),e._v(" registry2 registry:2\n")])])]),a("h3",{attrs:{id:"将镜像推送到私有仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将镜像推送到私有仓库"}},[e._v("#")]),e._v(" 将镜像推送到私有仓库<")]),e._v(" "),a("p",[e._v("前面说使用"),a("code",[e._v("docker push")]),e._v("命令可将镜像推送到"),a("code",[e._v("Docker Hub")]),e._v("，将构建的镜像推送到私有仓库时，只需指定私有仓库的地址，即可将镜像推送到私有仓库。")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" push localhost:5000/ai_machine:0.0.1\n")])])]),a("p",[e._v("执行以上命令，发现推送并没有成功，且提示以下内容：")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The push refers to a repository [localhost:5080/ai_machine] ")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# An image does not exist locally with the tag:localhost:5000/ai_machine")]),e._v("\n")])])]),a("p",[a("code",[e._v("Docker Hub")]),e._v("是默认的 "),a("code",[e._v("Docker Registry")]),e._v("，所以，"),a("code",[e._v("ai_machine:0.0.1")]),e._v("相当于"),a("code",[e._v("docker.io/ai_machine:0.0.1")]),e._v("。")]),e._v(" "),a("p",[e._v("因此，要想将镜像推送到有仓库，需要修改镜像标签，命令如下：")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" tag ai_machine:0.0.1 localhost:5080/ai_machine:0.0.1\n")])])]),a("p",[e._v("修改标签后就可以推送成功了。")]),e._v(" "),a("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-8685746128991385","data-ad-slot":"2974191661"}}),e._v(" "),a("blockquote",[a("p",[e._v("-"),a("a",{attrs:{href:"https://docs.docker.com/docker-hub/quickstart/",target:"_blank",rel:"noopener noreferrer"}},[e._v("1.https://docs.docker.com/docker-hub/quickstart/"),a("OutboundLink")],1)])])],1)}),[],!1,null,null,null);a.default=t.exports}}]);