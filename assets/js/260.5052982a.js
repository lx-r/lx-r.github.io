(window.webpackJsonp=window.webpackJsonp||[]).push([[260],{573:function(e,t,s){"use strict";s.r(t);var a=s(17),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"如何保存对docker镜像的修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何保存对docker镜像的修改"}},[e._v("#")]),e._v(" 如何保存对docker镜像的修改")]),e._v(" "),t("h2",{attrs:{id:"问题描述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[e._v("#")]),e._v(" 问题描述")]),e._v(" "),t("p",[e._v("当运行一个"),t("code",[e._v("docker")]),e._v("镜像后，很有可能会对运行的容器安装各种需要的软件，如"),t("code",[e._v("anconda")]),e._v("和"),t("code",[e._v("Python")]),e._v("，配置完成之后，如何保存这些修改以便在下次需要的时候直接从保存的镜像来"),t("code",[e._v("run")]),e._v("呢？")]),e._v(" "),t("h2",{attrs:{id:"常用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用方法"}},[e._v("#")]),e._v(" 常用方法")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("docker commit")]),e._v("命令，可以冻结一个容器的状态，并将其保存成新的镜像。")])]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 查看运行中的容器")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# CONTAINER ID   IMAGE           COMMAND       CREATED         STATUS         PORTS     NAMES")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 1b1f3fdcc56d   ubuntu:latest   "/bin/bash"   7 seconds ago   Up 6 seconds             pedantic_blackburn')]),e._v("\n")])])]),t("p",[e._v("提交修改，")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" commit CONTAINER_ID REPOSITORY:NEW_TAG\n")])])]),t("p",[e._v("提交后使用"),t("code",[e._v("sudo docker images")]),e._v("就能找到了，下次直接运行新保存的镜像，就可以进入想要的环境了。")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("使用Dockerfile")])])]),e._v(" "),t("p",[e._v("如果需要反复的重新构建环境，并且需要发布自己的环境，最好的方式是将对标准镜像的修改写到"),t("code",[e._v("Dockerfile")]),e._v("中，使用"),t("code",[e._v("Dockerfile")]),e._v("来生成镜像比较方便。")]),e._v(" "),t("h3",{attrs:{id:"reference"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[e._v("#")]),e._v(" reference")]),e._v(" "),t("blockquote",[t("ul",[t("li",[t("a",{attrs:{href:"https://stackoverflow.com/questions/44480740/how-to-save-a-docker-container-state",target:"_blank",rel:"noopener noreferrer"}},[e._v("1.https://stackoverflow.com/questions/44480740/how-to-save-a-docker-container-state"),t("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=r.exports}}]);