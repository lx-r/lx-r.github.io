(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{365:function(e,_,n){"use strict";n.r(_);var v=n(17),t=Object(v.a)({},(function(){var e=this,_=e._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"cityscapes数据集简介"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#cityscapes数据集简介"}},[e._v("#")]),e._v(" Cityscapes数据集简介")]),e._v(" "),_("h2",{attrs:{id:"_1-简介"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[e._v("#")]),e._v(" 1.简介")]),e._v(" "),_("p",[_("code",[e._v("Daimler AG")]),e._v("现在称为"),_("code",[e._v("Mercedes-Benz")]),e._v("研发中心和达姆施塔特工业大学（德语："),_("code",[e._v("Technische Universität Darmstadt")]),e._v("）研究人员开放的数据集，论文发表在2016年的"),_("code",[e._v("CVPR")]),e._v("。"),_("code",[e._v("cityscapess")]),e._v("采集自德国及附近国家的50个城市，包括了春夏秋三个季节的街区场景，且使用双目相机的获取了立体视觉视频序列。研究人员认为雨雪等极端天气需要特殊的处理方法和数据集进行研究，因此在"),_("code",[e._v("cityscapess")]),e._v("数据集中没有采集此类数据。数据采集使用的是"),_("code",[e._v("1/3")]),e._v("英寸 CMOS 2MP sensors (OnSemi安森美"),_("br"),e._v("\nAR0331)，帧率为"),_("code",[e._v("17")]),e._v("的卷帘相机，包括左目和右目，基线距离"),_("code",[e._v("22cm")]),e._v("，采集的是色彩深度为"),_("code",[e._v("16")]),e._v("位的的HDR图像。")]),e._v(" "),_("p",[e._v("数据集有选自"),_("code",[e._v("27")]),e._v("个城市的"),_("code",[e._v("5000")]),e._v("张图像进行了"),_("code",[e._v("pixel-level")]),e._v("像素级的语义和实例标注，可用于训练语义分割网络，这5000张中的每一张都取自于对应的一个包含30帧的视频序列的第20帧，剩余"),_("code",[e._v("23")]),e._v("个城市的"),_("code",[e._v("20000")]),e._v("张图像进行了粗略标注，这20000张图像是每间隔20s或汽车行驶20m采集一张得到的。精标一张数据平均"),_("code",[e._v("1.5h")]),e._v("，粗标一张数据"),_("code",[e._v("7min")]),e._v("。不同的标注人员对选出来的30张数据进行重复标注，像素一致性达"),_("code",[e._v("96%")]),e._v(",去除可标注为"),_("code",[e._v("unclear")]),e._v("的类别后，像素一致性达"),_("code",[e._v("98%")]),e._v("。")]),e._v(" "),_("p",[e._v("分割数据集包含了"),_("code",[e._v("33")]),e._v("个类,因部分类别数据量过于稀少，在验证数据集上，只有"),_("strong",[e._v("19")]),e._v("个语义分割类，因此要根据"),_("code",[e._v("*_polygons.json")]),e._v("文件生成"),_("code",[e._v("*_labelTrainIds.png")]),e._v("用以训练语义分割网络，可借助"),_("code",[e._v("cityscapesScripts")]),e._v("工程中的"),_("code",[e._v("cityscapesscripts/preparation/createTrainIdLabelImgs.py")]),e._v("脚本，在语义分割的"),_("code",[e._v("5000")]),e._v("张图像的标注文件中，转换后训练时设置成"),_("code",[e._v("ignore_indexe")]),e._v("的类别"),_("code",[e._v("255")]),e._v("的像素个数分布为"),_("code",[e._v("max: 1105427.0, min: 114462.0, avg: 263878.772")]),e._v("，图像大小是"),_("code",[e._v("2048x1024")]),e._v(","),_("code",[e._v("255")]),e._v("的占比最高大于"),_("code",[e._v("50%")]),e._v("。"),_("strong",[e._v("有个问题就是，使用语义分割模型测试输入一张图像，其输出每个像素的类别，这些类别都在"),_("code",[e._v("0-18")]),e._v("上，是无法预测出"),_("code",[e._v("255")]),e._v("这种类别的，对于在标签文件上本来属于"),_("code",[e._v("255")]),e._v("类别的像素也会被预测成"),_("code",[e._v("0-18")]),e._v(",这是否会影响模型的推理输出呢？")])]),e._v(" "),_("p",[e._v("语义分割数据集以城市为单位划分，分成了"),_("code",[e._v("train:2975")]),e._v("张，"),_("code",[e._v("validation:500")]),e._v("张,"),_("code",[e._v("test:1525")]),e._v("张,"),_("br"),e._v("\n与"),_("code",[e._v("KITTI/CamVid/DUS")]),e._v("数据集进行对比，")]),e._v(" "),_("ul",[_("li",[e._v("更多的交通参与实例(汽车和人)")])]),e._v(" "),_("p",[_("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/cs1hv.jpg",alt:""}})]),e._v(" "),_("ul",[_("li",[_("code",[e._v("human")]),e._v("和"),_("code",[e._v("vehicle")]),e._v("数量分布，与"),_("code",[e._v("Caltech")]),e._v("和"),_("code",[e._v("KITTI")]),e._v("对比")])]),e._v(" "),_("p",[_("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/cs2hvc.jpg",alt:""}})]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("立体信息")]),e._v(",汽车到相机距离的分布")])]),e._v(" "),_("p",[_("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/cs3dist.jpg",alt:""}})]),e._v(" "),_("h2",{attrs:{id:"目录结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[e._v("#")]),e._v(" 目录结构")]),e._v(" "),_("p",[_("strong",[e._v("示例:")])]),e._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n├── gtBbox3d\n│   ├── "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n│   │   ├── berlin\n│   │   ├── bielefeld\n│   │   ├── bonn\n│   │   ├── leverkusen\n│   │   ├── mainz\n│   │   └── munich\n│   ├── train\n│   │   ├── aachen\n│   │   ├── bochum\n│   │   ├── bremen\n│   │   ├── cologne\n│   │   ├── darmstadt\n│   │   ├── dusseldorf\n│   │   ├── erfurt\n│   │   ├── hamburg\n│   │   ├── hanover\n│   │   ├── jena\n│   │   ├── krefeld\n│   │   ├── monchengladbach\n│   │   ├── strasbourg\n│   │   ├── stuttgart\n│   │   ├── tubingen\n│   │   ├── ulm\n│   │   ├── weimar\n│   │   └── zurich\n│   └── val\n│   ├── frankfurt\n│   ├── lindau\n│   └── munster\n├── gtFine\n│   ├── "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n│   │   ├── berlin\n│   │   ├── bielefeld\n│   │   ├── bonn\n│   │   ├── leverkusen\n│   │   ├── mainz\n│   │   └── munich\n│   ├── train\n│   │   ├── aachen\n│   │   ├── bochum\n│   │   ├── bremen\n│   │   ├── cologne\n│   │   ├── darmstadt\n│   │   ├── dusseldorf\n│   │   ├── erfurt\n│   │   ├── hamburg\n│   │   ├── hanover\n│   │   ├── jena\n│   │   ├── krefeld\n│   │   ├── monchengladbach\n│   │   ├── strasbourg\n│   │   ├── stuttgart\n│   │   ├── tubingen\n│   │   ├── ulm\n│   │   ├── weimar\n│   │   └── zurich\n│   └── val\n│   ├── frankfurt\n│   ├── lindau\n│   └── munster\n├── leftImg8bit\n│   ├── "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n│   │   ├── berlin\n│   │   ├── bielefeld\n│   │   ├── bonn\n│   │   ├── leverkusen\n│   │   ├── mainz\n│   │   └── munich\n│   ├── train\n│   │   ├── aachen\n│   │   ├── bochum\n│   │   ├── bremen\n│   │   ├── cologne\n│   │   ├── darmstadt\n│   │   ├── dusseldorf\n│   │   ├── erfurt\n│   │   ├── hamburg\n│   │   ├── hanover\n│   │   ├── jena\n│   │   ├── krefeld\n│   │   ├── monchengladbach\n│   │   ├── strasbourg\n│   │   ├── stuttgart\n│   │   ├── tubingen\n│   │   ├── ulm\n│   │   ├── weimar\n│   │   └── zurich\n│   └── val\n│   ├── frankfurt\n│   ├── lindau\n│   └── munster\n")])])]),_("p",[e._v("路径:"),_("code",[e._v("{root}/{type}{video}/{split}/{city}/{city}_{seq:0>6}_{frame:0>6}_{type}{ext}")]),_("br"),e._v("\n参数解读:")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("{root}")]),e._v(",数据集根路径，安装使用"),_("code",[e._v("cityscapesScripts")]),e._v("提供的工具"),_("code",[e._v("csViewer")]),e._v("和"),_("code",[e._v("csLabelTool")]),e._v("等时，需先设置"),_("code",[e._v("export CITYSCAPES_DATASET={root}")])]),e._v(" "),_("li",[_("code",[e._v("type")]),e._v(",数据的类型,如"),_("code",[e._v("gtFine")]),e._v("精准标注的分割数据,"),_("code",[e._v("leftImg8bit")]),e._v("左目LDR图像等")]),e._v(" "),_("li",[_("code",[e._v("split")]),e._v(",可能的值有"),_("code",[e._v("train/val/test/train_extra/demoVideo")]),e._v("等,有些可能时空的")]),e._v(" "),_("li",[_("code",[e._v("city")]),e._v(",采集数据的城市")]),e._v(" "),_("li",[_("code",[e._v("seq")]),e._v(",图像数据所在视频序列编码,6位数字")]),e._v(" "),_("li",[_("code",[e._v("frame")]),e._v(",图像所在视频帧的编码,6位数字")]),e._v(" "),_("li",[_("code",[e._v("ext")]),e._v(",文件扩展名,如标注的"),_("code",[e._v("json")]),e._v("文件"),_("code",[e._v("_polygons.json")]),e._v(",全景分割中使用的实例标签文件"),_("code",[e._v("instanceIds.png")]),e._v("等")])]),e._v(" "),_("p",[e._v("以上路径中的"),_("code",[e._v("type")]),e._v("可选的值有:")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("gtFine")]),e._v(",精准标注的"),_("code",[e._v("5000")]),e._v("张数据的标注文件,同样划分成"),_("code",[e._v("train/val/test")]),e._v(",对于每个图像对应的标注文件有以下几个:")])]),e._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[e._v("aachen_000085_000019_gtFine_color.png\naachen_000085_000019_gtFine_instanceIds.png\naachen_000085_000019_gtFine_labelIds.png\naachen_000085_000019_gtFine_polygons.json\n")])])]),_("ul",[_("li",[_("code",[e._v("_gtFine_polygons.json")]),e._v(",标注生成的"),_("code",[e._v("json")]),e._v("文件,可用来生成"),_("code",[e._v("_instanceTrainIds.png")]),e._v("和"),_("code",[e._v("_labelTrainIds.png")])]),e._v(" "),_("li",[_("code",[e._v("_labelIds.png")]),e._v(",以"),_("code",[e._v("labelId")]),e._v("展示的语义分割标签文件,")]),e._v(" "),_("li",[_("code",[e._v("_instanceIds.png")]),e._v(",以"),_("code",[e._v("labelId")]),e._v("展示的实例分割标签文件")]),e._v(" "),_("li",[_("code",[e._v("_color.png")]),e._v(",可视化文件"),_("br"),_("br"),e._v("\n在使用"),_("code",[e._v("gtFine")]),e._v("中的数据做语义分割和实例分割模型训练时,需将标注文件转成"),_("code",[e._v("19")]),e._v("个类的"),_("code",[e._v("TrainIds")]),e._v("上,可以借助"),_("code",[e._v("cityscapesScripts")]),e._v("中的"),_("code",[e._v("csCreateTrainIdLabelImgs")]),e._v("和"),_("code",[e._v("csCreateTrainIdInstanceImgs")]),e._v("工具生成以下图像:")])]),e._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[e._v("aachen_000085_000019_gtFine_instanceTrainIds.png\naachen_000085_000019_gtFine_labelTrainIds.png\n")])])]),_("ul",[_("li",[_("code",[e._v("gtCoarse")]),e._v(",粗略标注的"),_("code",[e._v("19998")]),e._v("张图像")]),e._v(" "),_("li",[_("code",[e._v("leftImg8bit")]),e._v(",左目8位LDR图像")]),e._v(" "),_("li",[_("code",[e._v("rightImg8bit")]),e._v("右目8位LDR图像")]),e._v(" "),_("li",[_("code",[e._v("gtBbox3d")]),e._v(",2020年7月发布的3d 汽车检测的标注文件,对精准标注的"),_("code",[e._v("5000")]),e._v("张图像标注了汽车的"),_("code",[e._v("3d")]),e._v("检测框,可见论文"),_("a",{attrs:{href:"https://arxiv.org/abs/2006.07864",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cityscapes 3D (Gählert et al., CVPRW '20)"),_("OutboundLink")],1)]),e._v(" "),_("li",[_("code",[e._v("gtBboxCityPersons")]),e._v(",17年发布的行人检测标注文件")])]),e._v(" "),_("p",[_("strong",[e._v("cityscapesScripts")]),e._v("中提供的工具主要有:")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("csViewer")]),e._v(",可视化图像,及对应的标注文件,可调整透明度")]),e._v(" "),_("li",[_("code",[e._v("csLabelTool")]),e._v(",数据集使用的标注文件")]),e._v(" "),_("li",[_("code",[e._v("csCreateTrainIdLabelImgs")]),e._v(",根据"),_("code",[e._v("_polygons.json")]),e._v("生成"),_("code",[e._v("labels.py")]),e._v("中定义的"),_("code",[e._v("TrainIds")]),e._v("语义分割标签图像")]),e._v(" "),_("li",[_("code",[e._v("csCreateTrainIdInstanceImgs")]),e._v(",根据"),_("code",[e._v("_polygons.json")]),e._v("生成"),_("a",{attrs:{href:"https://github.com/mcordts/cityscapesScripts/blob/master/cityscapesscripts/helpers/labels.py",target:"_blank",rel:"noopener noreferrer"}},[_("code",[e._v("labels.py")]),_("OutboundLink")],1),e._v("中定义的"),_("code",[e._v("TrainIds")]),e._v("标签实例分割图像")])]),e._v(" "),_("p",[e._v("详细的可以在"),_("a",{attrs:{href:"https://github.com/mcordts/cityscapesScripts/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("cityscapesScripts"),_("OutboundLink")],1),e._v("中找到.")]),e._v(" "),_("p",[e._v("总结一下,这个"),_("code",[e._v("2015年")]),e._v("公开的数据集,到现在可以支持验证的任务有:")]),e._v(" "),_("ul",[_("li",[e._v("语义分割")]),e._v(" "),_("li",[e._v("实例分割")]),e._v(" "),_("li",[e._v("全景语义分割")]),e._v(" "),_("li",[e._v("3D 物体检测(汽车)")]),e._v(" "),_("li",[e._v("行人检测")])]),e._v(" "),_("p",[e._v("其有左目右目的数据和视差图,应该可以用来做单目深度估计网络的训练.")]),e._v(" "),_("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-8685746128991385","data-ad-slot":"2974191661"}}),e._v(" "),_("h3",{attrs:{id:"参考资料"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),_("blockquote",[_("p",[_("a",{attrs:{href:"https://www.cityscapes-dataset.com/dataset-overview/",target:"_blank",rel:"noopener noreferrer"}},[e._v("1.https://www.cityscapes-dataset.com/dataset-overview/"),_("OutboundLink")],1),_("br"),e._v(" "),_("a",{attrs:{href:"https://github.com/mcordts/cityscapesScripts",target:"_blank",rel:"noopener noreferrer"}},[e._v("2.https://github.com/mcordts/cityscapesScripts"),_("OutboundLink")],1)])])],1)}),[],!1,null,null,null);_.default=t.exports}}]);