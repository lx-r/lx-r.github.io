(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{467:function(t,a,s){"use strict";s.r(a);var o=s(17),e=Object(o.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"modules-of-yolov5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modules-of-yolov5"}},[t._v("#")]),t._v(" Modules of YOLOv5")]),t._v(" "),a("h2",{attrs:{id:"_1-bottleneck"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-bottleneck"}},[t._v("#")]),t._v(" 1.Bottleneck")]),t._v(" "),a("p",[t._v("来自于"),a("a",{attrs:{href:"https://arxiv.org/abs/1512.03385",target:"_blank",rel:"noopener noreferrer"}},[t._v("何凯明2014年工作Resnet"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/Bottleneck.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_2-bottlenetcsp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-bottlenetcsp"}},[t._v("#")]),t._v(" 2.BottlenetCSP")]),t._v(" "),a("p",[t._v("与"),a("a",{attrs:{href:"https://arxiv.org/abs/1911.11929",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSP论文"),a("OutboundLink")],1),t._v("描述的方式不一直，但"),a("a",{attrs:{href:"https://github.com/WongKinYiu/CrossStagePartialNetworks",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSP论文源码"),a("OutboundLink")],1),t._v("亦是通过此方式实现，参考"),a("a",{attrs:{href:"https://github.com/ultralytics/yolov5/issues/781",target:"_blank",rel:"noopener noreferrer"}},[t._v("YoloV5 Issues 781"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/bottleneckcsp.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_3-c3-bottleneck-with-3-convolutional-blocks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-c3-bottleneck-with-3-convolutional-blocks"}},[t._v("#")]),t._v(" 3. C3:Bottleneck with 3 Convolutional Blocks")]),t._v(" "),a("p",[t._v("将"),a("code",[t._v("Bottleneck")]),t._v("换成 "),a("code",[t._v("SPP")]),t._v("将变成 "),a("code",[t._v("C3SPP")]),t._v(",换成"),a("code",[t._v("Transformer")]),t._v("将变成"),a("code",[t._v("C3TR")]),t._v(",换成"),a("code",[t._v("GhostBottleneck")]),t._v("就是"),a("code",[t._v("C3Ghost")]),t._v(","),a("code",[t._v("C3")]),t._v("结构是"),a("code",[t._v("Yolov5")]),t._v("中提出的。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/c3.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_4-focus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-focus"}},[t._v("#")]),t._v(" 4. Focus")]),t._v(" "),a("p",[a("code",[t._v("Focus")]),t._v("层作为"),a("code",[t._v("Yolov5")]),t._v("中提出的，在最前面对输入做处理的层，是为了取代"),a("code",[t._v("YoloV3")]),t._v("中的前三层卷积，可以在保证图像信息无丢失的同时减小图像的尺寸，从而减小"),a("code",[t._v("FLOPS")]),t._v("，加速推理。")]),t._v(" "),a("p",[a("code",[t._v("YoloV5")]),t._v(" 作者对"),a("code",[t._v("Focus Layer")]),t._v("的一些解释，可参考"),a("a",{attrs:{href:"https://github.com/ultralytics/yolov5/discussions/3181",target:"_blank",rel:"noopener noreferrer"}},[t._v("Discussion"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://github.com/ultralytics/yolov5/issues/804",target:"_blank",rel:"noopener noreferrer"}},[t._v("Issue 804"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/focus.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_5-spp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-spp"}},[t._v("#")]),t._v(" 5.SPP")]),t._v(" "),a("p",[a("code",[t._v("YoloV5")]),t._v("中实现的"),a("code",[t._v("SPP")]),t._v("与"),a("code",[t._v("SPP")]),t._v("论文给出来的，有些许差异，"),a("code",[t._v("YoloV5")]),t._v("中的"),a("code",[t._v("SPP")]),t._v("是固定了"),a("code",[t._v("MaxPool")]),t._v("的"),a("code",[t._v("kernel")]),t._v("大小分别为"),a("code",[t._v("5\\9\\13")]),t._v(",其"),a("code",[t._v("stride=1")]),t._v(",且对输入进行"),a("code",[t._v("padding")]),t._v(",故"),a("code",[t._v("MaxPool")]),t._v("并不改变输入图像的尺寸大小。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/spp.jpg",alt:""}})]),t._v(" "),a("p",[t._v("标准的"),a("code",[t._v("SPP")]),t._v("是指定"),a("code",[t._v("MaxPool")]),t._v("后输出的"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:"MJX-TEX"},[a("mjx-msub",[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"W"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"o"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"u"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"t"}})],1)],1)],1)],1)],1)],1),t._v("、"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:"MJX-TEX"},[a("mjx-msub",[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"H"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"o"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"u"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"t"}})],1)],1)],1)],1)],1)],1),t._v("尺寸大小，"),a("code",[t._v("stride")]),t._v("是根据输入"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:"MJX-TEX"},[a("mjx-msub",[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"W"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"i"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"n"}})],1)],1)],1)],1),a("mjx-mo",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:","}})],1),a("mjx-msub",{attrs:{space:"2"}},[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"H"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"i"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"n"}})],1)],1)],1)],1)],1)],1),t._v("和"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:"MJX-TEX"},[a("mjx-msub",[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"W"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"o"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"u"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"t"}})],1)],1)],1)],1)],1)],1),t._v("、"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:"MJX-TEX"},[a("mjx-msub",[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"H"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"o"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"u"}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"t"}})],1)],1)],1)],1)],1)],1),t._v("来计算的，见"),a("a",{attrs:{href:"https://arxiv.org/abs/1406.4729",target:"_blank",rel:"noopener noreferrer"}},[t._v("何凯明大神2015年04月份的论文"),a("OutboundLink")],1),t._v(","),a("a",{attrs:{href:"https://github.com/yhenon/keras-spp/blob/master/spp/SpatialPyramidPooling.py",target:"_blank",rel:"noopener noreferrer"}},[t._v("keras代码实现"),a("OutboundLink")],1),t._v("。")],1),t._v(" "),a("h2",{attrs:{id:"_6-dwconv-depth-wise-convolution"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-dwconv-depth-wise-convolution"}},[t._v("#")]),t._v(" 6.DWConv, Depth Wise Convolution")]),t._v(" "),a("p",[t._v("分组卷积，将输入特征按通道数分组，然后分别进行卷积，最后将结果沿通道方向"),a("code",[t._v("Concat")]),t._v(","),a("code",[t._v("Pytorch Conv2d")]),t._v("接口中"),a("code",[t._v("groups")]),t._v("参数来控制，普通卷积相当于"),a("code",[t._v("groups")]),t._v("为"),a("code",[t._v("1")]),t._v("。")]),t._v(" "),a("blockquote",[a("p",[t._v("图片来源于:https://www.huaweicloud.com/zhishi/arc-13746260.html"),a("br"),t._v(" "),a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/dwc.jpg",alt:""}})])]),t._v(" "),a("p",[a("code",[t._v("YoloV5")]),t._v("中"),a("code",[t._v("goups=math.gcd(C1, C2)")]),t._v("，即输入输出通道的最大公约数。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/DWConv.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_7-ghostconv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-ghostconv"}},[t._v("#")]),t._v(" 7.GhostConv")]),t._v(" "),a("p",[t._v("华为诺亚实验室"),a("code",[t._v("2020CVPR")]),t._v("提出的"),a("code",[t._v("GhostConv")]),a("a",{attrs:{href:"https://arxiv.org/abs/1911.11907",target:"_blank",rel:"noopener noreferrer"}},[t._v("论文"),a("OutboundLink")],1),t._v(","),a("a",{attrs:{href:"https://github.com/huawei-noah/CV-Backbones/tree/master/ghostnet_pytorch",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码"),a("OutboundLink")],1),t._v(", 主要思想是卷积得到的不同通道上的特征比较相似，可以降低卷积输出的通道数，通过对卷积得到的通道上的特征做线性变换来扩充特征通道，减少"),a("code",[t._v("FLOPS")]),t._v("的同时，能得到相同的结果。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/ghost.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_8-ghostbottleneck"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-ghostbottleneck"}},[t._v("#")]),t._v(" 8.GhostBottleneck")]),t._v(" "),a("p",[a("code",[t._v("GhostBottleneck")]),t._v(", "),a("code",[t._v("YoloV5")]),t._v("中提出的结构，根据卷积的步长"),a("code",[t._v("stride")]),t._v("是否等于"),a("code",[t._v("2")]),t._v("来决定模块的结构。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/ghostbottleneck.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_9-mixconv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-mixconv"}},[t._v("#")]),t._v(" 9.MixConv")]),t._v(" "),a("p",[a("code",[t._v("Google Brain")]),t._v(" 2019年提出来的一种方法，对同一个输入，按通道进行划分，不同通道部分的输入使用不同"),a("code",[t._v("size")]),t._v("的卷积核，将得到的输出沿通道方向合并，并使用"),a("code",[t._v("shortcut")]),t._v("连接。该方法"),a("em",[t._v("将多个不同尺度的卷积核结合起来可以达到更高的准确性和效率")]),t._v("，"),a("a",{attrs:{href:"https://arxiv.org/abs/1907.09595",target:"_blank",rel:"noopener noreferrer"}},[t._v("论文"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/mixconv.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_10-crossconv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-crossconv"}},[t._v("#")]),t._v(" 10.CrossConv")]),t._v(" "),a("p",[t._v("将"),a("code",[t._v("3x3")]),t._v("的卷积拆分成"),a("code",[t._v("1x3")]),t._v("和"),a("code",[t._v("3x1")]),t._v("的卷积，同时使用"),a("code",[t._v("shortcut")]),t._v("链接，"),a("code",[t._v("YoloV5中定义，与使用")]),t._v("3x3`的卷积相比，可减少卷积参数。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/crossconv.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_11-fpn-pan"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-fpn-pan"}},[t._v("#")]),t._v(" 11.FPN+PAN")]),t._v(" "),a("p",[a("code",[t._v("YoloV5")]),t._v("中使用了"),a("code",[t._v("Feature Pyramid Network")]),t._v("("),a("a",{attrs:{href:"https://arxiv.org/abs/1612.03144",target:"_blank",rel:"noopener noreferrer"}},[t._v("FPN"),a("OutboundLink")],1),t._v(")与"),a("code",[t._v("Path Aggregation Network")]),t._v("("),a("a",{attrs:{href:"https://arxiv.org/abs/1803.01534",target:"_blank",rel:"noopener noreferrer"}},[t._v("PAN"),a("OutboundLink")],1),t._v(")网络结构，用于检测不同尺度的目标和特征融合。"),a("strong",[t._v("FPN")]),t._v("是"),a("code",[t._v("FAIR")]),t._v("的何凯明团队2016年提交"),a("code",[t._v("preprint version")]),t._v("并发表在"),a("code",[t._v("CVPR2017")]),t._v("上的论文，融入了特征金字塔，提高了目标检测的准确率，尤其体现在小物体的检测上。"),a("code",[t._v("P2\\P3\\P4")]),t._v("等对应的是"),a("code",[t._v("C2\\C3\\C4")]),t._v("是特征图大小发生变化的卷积层对应的输出，具体可参考论文"),a("code",[t._v("Section 3")]),t._v("。"),a("strong",[t._v("PAN")]),t._v("是香港中文大学发表在"),a("code",[t._v("CVPR2018")]),t._v("上的论文，基于高层的特征具有更多的语义信息，低层特征具有更多的细节信息来做特征融合，取得了更好的语义分割效果。与"),a("code",[t._v("FPN")]),t._v("的"),a("code",[t._v("Bottom-Up")]),t._v("的做法不同，其在"),a("code",[t._v("FPN")]),t._v("的基础上又增加了从顶向下的路径。")]),t._v(" "),a("p",[a("code",[t._v("Goole Brain")]),t._v("2019年提交的"),a("a",{attrs:{href:"https://arxiv.org/abs/1911.09070",target:"_blank",rel:"noopener noreferrer"}},[t._v("论文"),a("code",[t._v("EfficientDet")]),a("OutboundLink")],1),t._v("中提出了"),a("code",[t._v("BiFPN")]),t._v("结构，最终发表在了"),a("code",[t._v("CVPR2020")]),t._v("上，后续可将其应用到"),a("code",[t._v("YoloV5")]),t._v("上实验看一下效果。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://day-pic-1311699660.cos.ap-nanjing.myqcloud.com/image/panfpn.jpg",alt:""}})]),t._v(" "),a("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-8685746128991385","data-ad-slot":"2974191661"}}),t._v(" "),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("blockquote",[a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/ultralytics/yolov5",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/ultralytics/yolov5"),a("OutboundLink")],1)])])])],1)}),[],!1,null,null,null);a.default=e.exports}}]);